name: Module 4 - Adding Inputs & Constraints
version: 1.0.0
formatVersion: 1
inputs:
  diskSize:
    type: integer
    title: Disk Size (GB)
    default: 25
    enum:
      - 25
      - 50
      - 100
  naming:
    type: object
    $ref: /ref/property-groups/serverNamingInputs
    title: Server Naming
resources:
  data:
    type: Cloud.vSphere.Disk
    properties:
      capacityGb: ${input.diskSize}
  ubuntu:
    type: Cloud.vSphere.Machine
    properties:
      image: ubuntu
      flavor: small
      name: ${input.naming.location}${input.naming.environment}${input.naming.role}
      networks:
        - network: ${resource.network.id}
          assignment: static
      attachedDisks:
        - source: ${resource.data.id}
      constraints:
        - tag: cloud:vcf
        - tag: environment:${input.naming.environment}
  network:
    type: Cloud.NSX.Network
    properties:
      networkType: existing
